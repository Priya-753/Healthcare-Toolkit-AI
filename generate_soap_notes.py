import os
import google.generativeai as genai

genai.configure(api_key="AIzaSyDwZKCIoIXv0WNZe5IxH9HqUK9Mf0_jxo4")

# Create the model
generation_config = {
  "temperature": 1,
  "top_p": 0.95,
  "top_k": 64,
  "max_output_tokens": 8192,
  "response_mime_type": "text/plain",
}

model = genai.GenerativeModel(
  model_name="gemini-1.5-pro",
  generation_config=generation_config,
)

chat_session = model.start_chat(
  history=[
    {
      "role": "user",
      "parts": [
        "Speaker 0: hi , martha . how are you ?\nSpeaker 1: i'm doing okay . how are you ?\nSpeaker 0: i'm doing okay . so , i know the nurse told you about dax . i'd like to tell dax a little bit about you , okay ?\nSpeaker 1: okay .\nSpeaker 0: martha is a 50-year-old female with a past medical history significant for congestive heart failure , depression and hypertension who presents for her annual exam . so , martha , it's been a year since i've seen you . how are you doing ?\nSpeaker 1: i'm doing well . i've been traveling a lot recently since things have , have gotten a bit lighter . and i got my , my vaccine , so i feel safer about traveling . i've been doing a lot of hiking . uh , went to washington last weekend to hike in northern cascades, like around the mount baker area .\nSpeaker 0: nice . that's great . i'm glad to hear that you're staying active , you know . i , i just love this weather . i'm so happy the summer is over . i'm definitely more of a fall person .\nSpeaker 1: yes , fall foliage is the best .\nSpeaker 0: yeah . um , so tell me , how are you doing with the congestive heart failure ? how are you doing watching your diet ? i know we've talked about watching a low sodium diet . are you doing okay with that ?\nSpeaker 1: i've been doing well with that . i resisted , as much , as i could , from the tater tots , you know , the soft pretzels , the salty foods that i , i love to eat . and i've been doing a really good job .\nSpeaker 0: okay , all right . well , i'm glad to hear that . and you're taking your medication ?\nSpeaker 1: yes .\nSpeaker 0: okay , good . and any symptoms like chest pains , shortness of breath , any swelling in your legs ?\nSpeaker 1: no , not that i've noticed .\nSpeaker 0: okay , all right . and then in terms of your depression , i know that we tried to stay off of medication in the past because you're on medications for your other problems . how are you doing ? and i know that you enrolled into therapy . is that helping ? or-\nSpeaker 1: yeah , it's been helping a lot . i've been going every week , um , for the past year since my last annual exam . and that's been really helpful for me .\nSpeaker 0: okay . so , no , no issues , no feelings of wanting to harm yourself or hurt others ?\nSpeaker 1: no , nothing like that .\nSpeaker 0: okay , all right . and then in terms of your high blood pressure , i know that you and i have kind of battled in the past with you remembering to take some of your blood pressure medications . how are you doing with that ?\nSpeaker 1: i'm still forgetting to take my blood pressure medication . and i've noticed when work gets more stressful , my blood pressure goes up .\nSpeaker 0: okay . and , and so how has work going for you ?\nSpeaker 1: it's been okay . it's been a lot of long hours , late nights . a lot of , um , you know , fiscal year end data that i've been having to pull . so , a lot of responsibility , which is good . but with the responsibility comes the stress .\nSpeaker 0: yeah , okay , all right . i understand . um , all right . well , i know that you did a review of system sheet when you checked in with the nurse . i know that you were endorsing some nasal congestion from some of the fall pollen and allergies . any other symptoms , nausea or vomiting , abdominal pain , anything like that ?\nSpeaker 1: no , nothing like that .\nSpeaker 0: no , okay , all right . well , i'm gon na go ahead and do a quick physical exam , okay ?\nSpeaker 1: okay .\nSpeaker 0: hey , dragon , show me the blood pressure . so , yeah , looking at your blood pressure today here in the office , it is a little elevated . you know , it could just , you could just be nervous . uh , let's look at some of the past readings . hey , dragon , show me the blood pressure readings . hey , dragon , show me the blood pressure readings . here we go . uh , so they are running on the higher side . um , y- you know , i , i do think that , you know , i'd like to see you take your medication a little bit more , so that we can get that under control a little bit better , okay ?\nSpeaker 1: okay .\nSpeaker 0: so , i'm just gon na check out your heart and your lungs . and you know , let you know what i find , okay ?\nSpeaker 1: okay .\nSpeaker 0: okay . so , on your physical examination , you know , everything looks good . on your heart exam , i do appreciate a three out of six systolic ejection murmur , which i've heard in the past , okay ? and on your lower extremities , i do appreciate one plus pitting edema , so you do have a little bit of fluid in your legs , okay ?\nSpeaker 1: okay .\nSpeaker 0: let's go ahead , i wan na look at some of your results , okay ? hey , dragon , show me the echocardiogram . so , this is the result of the echocardiogram that we did last year . it showed that you have that low-ish pumping function of your heart at about 45 % . and it also sh- shows some mitral regurgitation , that's that heart murmur that i heard , okay ?\nSpeaker 0: um , hey , dragon , show me the lipid panel . so , looking at your lipid panel from last year , you know , everything , your cholesterol was like , a tiny bit high . but it was n't too , too bad , so i know you're trying to watch your diet . so , we'll repeat another one this year , okay ?\nSpeaker 1: okay .\nSpeaker 0: um , so i wan na just go over a little bit about my assessment and my plan for you , okay ? so , for your first problem your congestive heart failure , um , i wan na continue you on your current medications . but i do wan na increase your lisinopril to 40 milligrams a day , just because your blood pressure's high . and you know , you are retaining a little bit of fluid . i also wan na start you on some lasix , you know , 20 milligrams a day . and have you continue to watch your , your diet , okay ?\nSpeaker 1: okay .\nSpeaker 0: i also wan na repeat another echocardiogram , okay ?\nSpeaker 1: all right .\nSpeaker 0: hey , dragon , order an echocardiogram . from a depression standpoint , it sounds like you're doing really well with that . so , i'm , i'm really happy for you . i'm , i'm glad to see that you're in therapy and you're doing really well . i do n't feel the need to start you on any medications this year , unless you feel differently .\nSpeaker 1: no , i feel the same way .\nSpeaker 0: okay , all right . and then for your last problem your hypertension , you know , again i , i , i think it's out of control . but we'll see , i think , you know , i'd like to see you take the lisinopril as directed , okay ? uh , i want you to record your blood pressures within the patient , you know , take your blood pressure every day . record them to me for like , about a week , so i have to see if we have to add another agent , okay ? 'cause we need to get that under better control for your heart failure to be more successful , okay ?\nSpeaker 1: okay .\nSpeaker 0: do you have any questions ? , and i forgot . for your annual exam , you're due for a mammogram , so we have to schedule for that , as well , okay ?\nSpeaker 1: okay .\nSpeaker 0: okay . do you have any questions ?\nSpeaker 1: can i take all my pills at the same time ?\nSpeaker 0: yeah .\nSpeaker 1: 'cause i've been trying to take them at different times of the day , 'cause i did n't know if it was bad to take them all at once or i should separate them . i do n't know .\nSpeaker 0: yeah . you can certainly take them , you know , all at the same time , as long , as yeah , they're all one scale . you can take them all at the same time . just set an alarm-\nSpeaker 1: okay .\nSpeaker 0: . some time during the day to take them , okay ?\nSpeaker 1: that might help me remember better .\nSpeaker 0: all right . that sounds good . all right , well , it's good to see you .\nSpeaker 1: good seeing you too .\nSpeaker 0: hey , dragon , finalize the note .\",\"CHIEF COMPLAINT\n\nAnnual exam.\n\nHISTORY OF PRESENT ILLNESS\n\nMartha Collins is a 50-year-old female with a past medical history significant for congestive heart failure, depression, and hypertension who presents for her annual exam. It has been a year since I last saw the patient.\n\nThe patient has been traveling a lot recently since things have gotten a bit better. She reports that she got her COVID-19 vaccine so she feels safer about traveling. She has been doing a lot of hiking.\n\nShe reports that she is staying active. She has continued watching her diet and she is doing well with that. The patient states that she is avoiding salty foods that she likes to eat. She has continued utilizing her medications. The patient denies any chest pain, shortness of breath, or swelling in her legs.\n\nRegarding her depression, she reports that she has been going to therapy every week for the past year. This has been really helpful for her. She denies suicidal or homicidal ideation.\n\nThe patient reports that she is still forgetting to take her blood pressure medication. She has noticed that when work gets more stressful, her blood pressure goes up. She reports that work has been going okay, but it has been a lot of long hours lately.\n\nShe endorses some nasal congestion from some of the fall allergies. She denies any other symptoms of nausea, vomiting, abdominal pain.\n\nREVIEW OF SYSTEMS\n\n• Ears, Nose, Mouth and Throat: Endorses nasal congestion from allergies.\n• Cardiovascular: Denies chest pain or dyspnea on exertion.\n• Respiratory: Denies shortness of breath.\n• Gastrointestinal: Denies abdominal pain, nausea, or vomiting.\n• Psychiatric: Endorses depression. Denies suicidal or homicidal ideations.\n\nPHYSICAL EXAMINATION\n\n• Cardiovascular: Grade 3/6 systolic ejection murmur.\n1+ pitting edema of the bilateral lower extremities.\n\nVITALS REVIEWED\n\n• Blood Pressure: Elevated.\n\nRESULTS\n\nEchocardiogram demonstrates decreased ejection fraction of 45%. Mitral regurgitation is present.\n\nLipid panel: Elevated cholesterol.\n\nASSESSMENT AND PLAN\n\nMartha Collins is a 50-year-old female with a past medical history significant for congestive heart failure, depression, and hypertension who presents for her annual exam.\n\nCongestive heart failure.\n• Medical Reasoning: She has been compliant with her medication and dietary modifications. Her previous year's echocardiogram demonstrated a reduced ejection fraction of 45%, as well as some mitral regurgitation. Her cholesterol levels were slightly elevated on her lipid panel from last year.\n• Additional Testing: We will order a repeat echocardiogram. We will also repeat a lipid panel this year.\n• Medical Treatment: She will continue with her current medications. We will increase her lisinopril to 40 mg daily and initiate Lasix 20 mg daily.\n• Patient Education and Counseling: I encouraged her to continue with dietary modifications.\n\nDepression.\n• Medical Reasoning: She is doing well with weekly therapy.\n\nHypertension.\n• Medical Reasoning: She has been compliant with dietary modifications but has been inconsistent with the use of her medication. She attributes elevations in her blood pressure to increased stress.\n• Medical Treatment: We will increase her lisinopril to 40 mg daily as noted above.\n• Patient Education and Counseling: I encouraged the patient to take her lisinopril as directed. I advised her to monitor her blood pressures at home for the next week and report them to me.\n\nHealthcare maintenance.\n• Medical Reasoning: The patient is due for her routine mammogram.\n• Additional Testing: We will order a mammogram and have this scheduled for her.\n\nPatient Agreements: The patient understands and agrees with the recommended medical treatment plan.\n\nSpeaker 0: hi , andrew , how are you ?\nSpeaker 1: hi . good to see you .\nSpeaker 0: it's good to see you as well . so i know that the nurse told you about dax . i'd like to tell dax a little bit about you .\nSpeaker 1: sure .\nSpeaker 0: okay ? so , andrew is a 62-year-old male with a past medical history significant for a kidney transplant , hypothyroidism , and arthritis , who presents today with complaints of joint pain . andrew , what's going on with your joint ? what happened ?\nSpeaker 1: uh , so , over the the weekend , we've been moving boxes up and down our basements stairs , and by the end of the day my knees were just killing me .\nSpeaker 0: okay . is , is one knee worse than the other ?\nSpeaker 1: equally painful .\nSpeaker 0: okay .\nSpeaker 1: both of them .\nSpeaker 0: and did you , did you injure one of them ?\nSpeaker 1: um , uh , i've had some knee problems in the past but i think it was just the repetition and the weight of the boxes .\nSpeaker 0: okay . all right . and , and what have you taken for the pain ?\nSpeaker 1: a little tylenol . i iced them for a bit . nothing really seemed to help , though .\nSpeaker 0: okay . all right . um , and does it prevent you from doing , like , your activities of daily living , like walking and exercising and things like that ?\nSpeaker 1: uh , saturday night it actually kept me up for a bit . they were pretty sore .\nSpeaker 0: mm-hmm . okay . and any other symptoms like fever or chills ?\nSpeaker 1: no .\nSpeaker 0: joint pain ... i mean , like muscle aches ?\nSpeaker 1: no .\nSpeaker 0: nausea , vomiting , diarrhea ?\nSpeaker 1: no .\nSpeaker 0: anything like that ?\nSpeaker 1: no .\nSpeaker 0: okay . all right . now , i know that you've had the kidney transplant a few years ago for some polycystic kidneys .\nSpeaker 1: mm-hmm .\nSpeaker 0: um , how are you doing with that ? i know that you told dr. gutierrez-\nSpeaker 1: mm .\nSpeaker 0: . a couple of weeks ago .\nSpeaker 1: yes .\nSpeaker 0: everything's okay ?\nSpeaker 1: so far , so good .\nSpeaker 0: all right . and you're taking your immunosuppressive medications ?\nSpeaker 1: yes , i am .\nSpeaker 0: okay . all right . um , and did they have anything to say ? i have n't gotten any reports from them , so ...\nSpeaker 1: no , n- nothing out of the ordinary , from what they reported .\nSpeaker 0: okay . all right . um , and in terms of your hyperthyroidism , how are you doing with the synthroid ? are you doing okay ?\nSpeaker 1: uh , yes , i am .\nSpeaker 0: you're taking it regularly ?\nSpeaker 1: on the clock , yes .\nSpeaker 0: yes . okay . and any fatigue ? weight gain ? anything like that that you've noticed ?\nSpeaker 1: no , nothing out of the ordinary .\nSpeaker 0: okay . and just in general , you know , i know that we've kind of battled with your arthritis .\nSpeaker 1: mm-hmm .\nSpeaker 0: you know , it's hard because you ca n't take certain medications 'cause of your kidney transplant .\nSpeaker 1: sure .\nSpeaker 0: so other than your knees , any other joint pain or anything like that ?\nSpeaker 1: every once in a while , my elbow , but nothing , nothing out of the ordinary .\nSpeaker 0: okay . all right . now i know the nurse did a review of systems sheet when you checked in . any other symptoms i might have missed ?\nSpeaker 1: no .\nSpeaker 0: no headaches ?\nSpeaker 1: no headaches .\nSpeaker 0: anything like that w- ... okay . all right . well , i wan na go ahead and do a quick physical exam , all right ? hey , dragon , show me the vital signs . so here in the office , your vital signs look good . you do n't have a fever , which is good .\nSpeaker 1: mm-hmm .\nSpeaker 0: your heart rate and your , uh , blood pressure look fine . i'm just gon na check some things out , and i'll let you know what i find , okay ?\nSpeaker 1: perfect .\nSpeaker 0: all right . does that hurt ?\nSpeaker 1: a little bit . that's tender .\nSpeaker 0: okay , so on physical examination , on your heart exam , i do appreciate a little two out of six systolic ejection murmur-\nSpeaker 1: mm-hmm .\nSpeaker 0: . which we've heard in the past . okay , so that seems stable . on your knee exam , there is some edema and some erythema of your right knee , but your left knee looks fine , okay ? um , you do have some pain to palpation of the right knee and some decreased range of motion , um , on exam , okay ? so what does that mean ? so we'll go ahead and we'll see if we can take a look at some of these things . i know that they did an x-ray before you came in , okay ?\nSpeaker 1: mm-hmm .\nSpeaker 0: so let's take a look at that .\nSpeaker 1: sure .\nSpeaker 0: hey , dragon , show me the right knee x-ray . so here's the r- here's your right knee x-ray . this basically shows that there's good bony alignment . there's no acute fracture , which is not surprising , based on the history .\nSpeaker 1: mm-hmm .\nSpeaker 0: okay ? hey , dragon , show me the labs . and here , looking at your lab results , you know , your white blood cell count is not elevated , which is good . you know , we get concerned about that in somebody who's immunocompromised .\nSpeaker 1: mm-hmm .\nSpeaker 0: and it looks like your kidney function is also very good . so i'm , i'm very happy about that .\nSpeaker 1: yeah .\nSpeaker 0: okay ? so i just wan na go over a little bit about my assessment and my plan for you .\nSpeaker 1: mm-hmm .\nSpeaker 0: so for your knee pain , i think that this is an acute exacerbation of your arthritis , okay ? so i wan na go ahead and if ... and prescribe some ultram 50 milligrams every six hours as needed .\nSpeaker 1: okay .\nSpeaker 0: okay ? i also wan na go ahead and just order an autoimmune panel , okay ? hey , dragon , order an autoimmune panel . and you know , i , i want , i want you to just take it easy for right now , and if your symptoms continue , we'll talk about further imaging and possibly referral to physical therapy , okay ?\nSpeaker 1: you got it .\nSpeaker 0: for your second problem , your hypothyroidism , i wan na go ahead and continue you on this ... on the synthroid , and i wan na go ahead and order some thyroid labs , okay ?\nSpeaker 1: sure .\nSpeaker 0: hey , dragon , order a thyroid panel . and then for your last problem , the arthritis , you know , we just kinda talked about that . you know , it's gon na be a struggle for you because again , you ca n't take some of those anti-inflammatory medications because of your kidney transplant , so ...\nSpeaker 1: mm-hmm .\nSpeaker 0: you know , let's see how we do over the next couple weeks , and again , we'll refer you to physical therapy if we need to , okay ?\nSpeaker 1: you got it .\nSpeaker 0: you have any questions ?\nSpeaker 1: not at this point .\nSpeaker 0: okay . hey , dragon , finalize the note .\",\"CHIEF COMPLAINT\n\nJoint pain.\n\nHISTORY OF PRESENT ILLNESS\n\nAndrew Perez is a 62-year-old male with a past medical history significant for a kidney transplant, hypothyroidism, and arthritis. He presents today with complaints of joint pain.\n\nThe patient reports that over the weekend, he was moving boxes up and down the basement stairs. By the end of the day, his knees were very painful. The pain is equal in the bilateral knees. He states that he has had some knee problems in the past, but he believes that it was due to the repetition and the weight of the boxes. He states that the pain does not prevent him from doing his activities of daily living. By the end of the day on Saturday, his knee soreness interrupted his sleep. The patient has taken Tylenol and iced his knees for a short period of time, but nothing really seemed to help.\n\nThe patient states that he had a kidney transplant a few years ago for some polycystic kidneys. He notes that he saw Dr. Gutierrez a couple of weeks ago, and everything was normal at that time. The patient continues to utilize his immunosuppressant medications.\n\nRegarding his hypothyroidism, the patient states that he is doing well. He has continued to utilize Synthroid regularly.\n\nIn regards to his arthritis, the patient states that occasionally he has pain in his elbow, but nothing out of the ordinary.\n\nHe denies any other symptoms such as fever, chills, muscle aches, nausea, vomiting, diarrhea, fatigue, and weight loss.\n\nREVIEW OF SYSTEMS\n\n• Constitutional: Denies fevers, chills, or weight loss.\n• Musculoskeletal: Denies muscle pain. Endorses joint pain in the bilateral knees.\n• Neurological: Denies headaches.\n\nPHYSICAL EXAMINATION\n\n• Cardiovascular: 2/6 systolic ejection murmur, stable.\n• Musculoskeletal: There is edema and erythema of the right knee with pain to palpation. Range of motion is decreased. Left knee exam is normal.\n\nRESULTS\n\nX-ray of the right knee is unremarkable. Good bony alignment. No acute fractures.\n\nLabs: Within normal limits. White blood cell count is within normal limits. Kidney function is normal.\n\nASSESSMENT AND PLAN\n\nAndrew Perez is a 62-year-old male with a past medical history significant for a kidney transplant, hypothyroidism, and arthritis. He presents today with complaints of joint pain.\n\nArthritis.\n• Medical Reasoning: The patient reports increased joint pain in his bilateral knees over the past weekend. Given that his right knee x-ray was unremarkable, I believe this is an acute exacerbation of his arthritis.\n• Additional Testing: We will order an autoimmune panel for further evaluation.\n• Medical Treatment: Initiate Ultram 50 mg every 6 hours as needed.\n• Patient Education and Counseling: I advised the patient to rest his knees. If his symptoms persist, we can consider further imaging and possibly a referral to physical therapy.\n\nHypothyroidism.\n• Medical Reasoning: The patient is doing well on Synthroid and is asymptomatic at this time.\n• Additional Testing: We will order a thyroid panel.\n• Medical Treatment: Continue Synthroid.\n\nStatus post renal transplant.\n• Medical Reasoning: He is doing well and has been compliant with his immunosuppressive medications. On recent labs, his white blood cell count was within a normal limits and his kidney function is stable.\n• Medical Treatment: Continue current regimen.\n\nPatient Agreements: The patient understands and agrees with the recommended medical treatment plan.\n\nIn the same way, can you create some similar conversation and SOAP data recreating conversations with DENTISTS for diseases like Periodontitis and cavities",
      ],
    },
    {
      "role": "model",
      "parts": [
        "## Conversation and SOAP Note: Periodontitis\n\n**Speaker 0 (Dentist):**  \"Hi Sarah, how are you doing today?  It's been a while since your last checkup.\"\n\n**Speaker 1 (Patient):** \"Hi Dr. Smith, I'm doing okay. I've been feeling a bit tired lately, and my gums seem a bit sore and puffy.\"\n\n**Speaker 0:** \"I see.  Can you tell me a little more about that?  When did you first notice the soreness and puffiness?\"\n\n**Speaker 1:** \"It's been going on for a few weeks now, I think.  My gums bleed a bit when I brush too, which is new.  It's mostly around my front teeth.\"\n\n**Speaker 0:** \"Okay.  Have you noticed any other symptoms, like bad breath or loose teeth?\"\n\n**Speaker 1:** \"My breath has been a bit worse than usual, but I haven't noticed any loose teeth.\"\n\n**Speaker 0:** \"Okay.  Have you been taking care of your teeth like usual? Brushing twice a day, flossing?\"\n\n**Speaker 1:** \"Yes, I try to.  I've been traveling a lot lately and haven't always been the most diligent.\"\n\n**Speaker 0:** \"Okay, I understand.  Well, let's take a look and see what's going on.  Just relax, it won't take long.\"\n\n**[The dentist performs a thorough examination and takes X-rays]**\n\n**Speaker 0:** \"So Sarah, based on the exam and your X-rays, it seems like you have some early stage periodontitis.  The gums are inflamed and there's some bone loss around the teeth.  This is likely due to bacteria buildup, and it's something we need to address quickly.\"\n\n**Speaker 1:** \"Oh, okay.  Is that serious?\"\n\n**Speaker 0:** \"It can be if it's not treated.  Left untreated, periodontitis can lead to tooth loss.  But the good news is, we can manage it with proper care and treatment.\"\n\n**Speaker 1:** \"What kind of treatment would you recommend?\"\n\n**Speaker 0:** \"First, we need to do a deep cleaning, called scaling and root planing, to remove the bacteria and plaque buildup beneath the gum line.  We'll also need to teach you how to improve your oral hygiene practices.  After that, we'll schedule regular follow-up visits to monitor your progress.\"\n\n**Speaker 1:** \"Okay, that sounds good.  How often will I need to come in?\"\n\n**Speaker 0:** \"We'll determine that together after the cleaning.  But generally, people with periodontitis need to come in for checkups more frequently.  We'll also discuss further treatment options if needed, like antibiotics or surgery.\"\n\n**Speaker 1:** \"Okay, I'm ready to get started.\"\n\n**[The dentist schedules the cleaning and explains further details about the treatment plan.]**\n\n---\n\n**SOAP Note:**\n\n**S (Subjective):**  Patient reports gum soreness, puffiness, and bleeding during brushing around the front teeth, for a few weeks.  Reports slight increase in bad breath. Reports regular brushing and flossing, but inconsistent due to recent travel. \n\n**O (Objective):**  Examination reveals inflamed gums and slight bone loss around the front teeth. X-rays show evidence of early-stage periodontitis. \n\n**A (Assessment):**  Early stage periodontitis.\n\n**P (Plan):** Deep cleaning (scaling and root planing) to remove bacteria and plaque.  Patient education on proper oral hygiene practices.  Regular follow-up visits to monitor progress.  Further treatment options to be discussed as needed (antibiotics, surgery). \n\n\n## Conversation and SOAP Note: Cavities\n\n**Speaker 0 (Dentist):** \"Hi John, how are you doing today? It's great to see you again.\"\n\n**Speaker 1 (Patient):** \"Hi Dr. Jones, I'm doing well.  I just wanted to come in for my regular checkup.  I've been feeling a bit sensitive to cold things lately, and I think I have a small hole in one of my back teeth.\"\n\n**Speaker 0:** \"Okay, I see.  Can you point to where you're feeling the sensitivity?\"\n\n**Speaker 1:** \"It's on my lower left, the back one.\"\n\n**Speaker 0:** \"Okay, thanks.  We'll take a look and see what's going on.\"\n\n**[The dentist performs a thorough examination and takes X-rays]**\n\n**Speaker 0:** \"So John, based on your exam and the X-rays, it looks like you have a small cavity on that lower left back tooth.  It's not too deep yet, so we can treat it easily with a filling.\"\n\n**Speaker 1:** \"That's good to hear.  What's involved in getting a filling?\"\n\n**Speaker 0:** \"We'll use a drill to remove the decayed portion of the tooth.  Then, we'll fill the space with a composite resin material, which is tooth-colored and durable.  The whole process usually takes about an hour, and it won't hurt because we'll use local anesthesia.\"\n\n**Speaker 1:** \"Okay, that sounds pretty straightforward.  When can I get this done?\"\n\n**Speaker 0:** \"We have an opening next week.  How does [date and time] work for you?\"\n\n**Speaker 1:** \"That works great.  I'll make sure to take some ibuprofen beforehand just in case.\"\n\n**Speaker 0:** \"Good idea.  You can also use a cold compress on the area to help with any swelling afterward.  Just be sure to avoid chewing on that side for a few days.\"\n\n**[The dentist schedules the filling and explains further details about the procedure and aftercare.]**\n\n---\n\n**SOAP Note:**\n\n**S (Subjective):** Patient reports sensitivity to cold, and believes they have a small hole in their lower left back tooth. \n\n**O (Objective):** Examination reveals a small cavity on the lower left back tooth. X-rays confirm the cavity.\n\n**A (Assessment):**  Small cavity on the lower left back tooth.\n\n**P (Plan):** Fill the cavity with composite resin filling.  Procedure scheduled for [date and time]. Patient educated on pre- and post-procedure care. \n",
      ],
    },
  ]
)

def get_soap_notes(patient_id, date, transcript):
    response = chat_session.send_message(f"Hey, here is the transcript between a dentist and the patient. The patient id is {patient_id} and date of the appointment is {date}. Can you make the soap notes for this discussion? Make them as detailed as possible. \n {transcript}")
    return response.text
